<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Upload File ke GitHub</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 2rem;
    }
    input[type="file"] {
      margin-bottom: 1rem;
    }
    pre {
      background: #f0f0f0;
      padding: 1rem;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <h1>Upload File ke GitHub via Vercel</h1>
  <form id="uploadForm">
    <input type="file" id="fileInput" required />
    <br />
    <button type="submit">Upload</button>
  </form>

  <h3>Response:</h3>
  <pre id="responseBox">Belum ada upload</pre>

  <script>
    const form = document.getElementById('uploadForm');
    const responseBox = document.getElementById('responseBox');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const file = document.getElementById('fileInput').files[0];

      if (!file) return alert('Pilih file terlebih dahulu!');

      const reader = new FileReader();
      reader.onloadend = async () => {
        const base64 = reader.result.split(',')[1];

        const res = await fetch('/api/upload', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            fileName: file.name,
            content: base64
          })
        });

        const result = await res.json();
        responseBox.textContent = JSON.stringify(result, null, 2);
      };

      reader.readAsDataURL(file);
    });
  </script>
</body>
</html>
